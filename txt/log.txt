Chat 开发日志 2025

3/19开始写日志
默认密码： changeit
Mysql，redis密码：123456

3月17前
    1.写了部分utils
    2.模板是使用的GoWeb开发脚手架，拉的自己的github，很多地方需要改

3/17 周一 晴
    1.发邮件的utils调试成功
    2.学习sqlc使用

3/18 周二 阴
    1.成功连接上服务器中的MySQL，Redis，使用的是服务器的公网IP，服务器的安全组要加这两个的端口
    ps：阿里云服务器5/17过期，到时候得更换

3/19 周三 晴
    1.还是在写config部分，牵扯的内容有点多
    2.补写了config的model部分

3/20 周四 晴
    1.继续补写了config的model部分
    2.完成了将配置文件读进全局结构体中的部分
    3.开始写setting包中的全部init,这些init就是将配置信息写进全局变量（global包）中（不全是）
    4.理解了空结构体作为方法的接收者的作用（个人理解是集成和区分方法）

3/24 周一 晴
    1.完成了mysql，redis的初始化部分
    2.写了大部分的email

3/25 周二 晴
    1.写mysql表结构
    2.学习了mysql的触发器,触发器还没有写

3/26 周三 扬尘
    1.处理了之前代码的一些问题，项目可以运行起来了

3/27 周四 阴
    1.开始写路由

3/30 周日 多云
    1.开始写register
    ps: router -> controller -> logic -> dao (redis & mysql(queries) )

3/31 周一 晴
    1.完成了用户注册业务中，判断邮箱是否存在的逻辑
    2.CreateUser这个查询语句后面跟了个查询语句，写逻辑是要补加上

4/1 周二 多云
    1.完成了邮箱的路由

4/2 周三 多云
    1.完成了register部分
    2.补写了token，work部分的Init

进度在logic\user.go  中的 Login 函数中，刚写完，postman测试成功了

4/4 - 4/6 清明假期

4/6 周天 晴转多云
    1.mysql挂掉了，重启后数据没了
    2.写Token，用户鉴权部分

4/7 周一
    休息

4/8 周二 晴
    1.第一次进行前后端交互
    2.数据库被劫持了，安全不能设为0.0.0.0 ！

4/9 周三 晴
    1.重新创建了数据库容器，登录注册接口测试成功!

4/10 周四 晴
    1.完成了 改密码，改邮箱，退出登录 接口
    2.开始写account部分

4/12 周六 晴
    蓝桥杯

4/13 周日 晴
    休息（周末两天比赛）

4/14 周一 晴
    1.完成了account的创建接口，并完成了调试

4/15 周二 晴
    1.完成了获取账号Token，并完成了调试

4/16 周三 晴
    1.完成了account中剩余接口，并完成了调试
tips: 模糊查询不能用 '%name%' 要防止SQL注入

4/17 周四 晴
    1.开始写application
    2.完成了create和delete两个部分

4/19 周六 晴
    C4天梯赛

4/20 周日 晴
    休息
    写了一部分application

4/21 周一 雨
    1.大一数据结构考核以及方向讲解

4/22 周二 阴
    1.完成了application部分的creat，delete，list接口，并完成了测试

4/23 周三 晴
    1.写application的剩余接口

4/24，4/25，4/26，4/27 准备互联网+

4/28 周一 晴
    1.完成了RefuseApplication接口，并完成了测试
    2.AcceptApplication接口完成了大部分，  由于涉及发送通知，所以还不能调用

5/5 周一 扬尘

5/7 周三 扬尘
    1.开始写发送消息。要写的很多。

5/8 周四 多云
    蓝桥国赛训练考试1

5/11 周日 晴
    继续写sendmessage

5/12 周一 晴
    和前端测试application和account的部分接口

5/13 周二 晴
    完成messger部分的前期工作，包括发消息等，后面需要引入MQ

5/14 周三 晴
    蓝桥国赛训练考试2

5/15 周四 晴
    测试接口

5/19 周一 晴
    1.测试接口
    2.完成了查消息的三个接口

5/20 周二 晴
    实验课到8.30
    修改了5/19日遇到的Bug，修改了分页部分
    ps：统一分页，后端传出的分页信息为计算好的 总页数（Total）
5/22 周四 晴
    好友申请状态新增 “等待验证”，用于区分发出去的申请和收到的申请
    ps：“等待验证” 字样并不存储在数据库，只是查询时将符合条件的 “已申请” 翻译为 “等待验证”

5/25,26 休息

5/27 周二 晴
    修改application部分，用于区别发出去的申请和收到的申请（完成了22号的内容）

6/9 周一 晴转阴
    完成了message余下接口，并测试了list，update中的部分接口

6/10 周二 晴
    测试了message的一些接口，改了很多bug（推送了github）

7/15 周二 晴
    完成并测试了setting和group部分的路由

7/16 周三 晴
    新增好友关系中删除消息的功能（单删）
    ps：新增列名is_delete：
        值为 1 代表删除自己发送的消息；
        值为 -1 代表删除别人发送的消息；
        值为 0 代表没有人删消息；
        值为 2 代表两人都删除了该消息。

7/17 周四 晴
    1.推送github
    2.学习了项目部署并成功部署到了服务器的docker中

7/18 周五 晴
    修改遗留问题，改Bug

7/21 周一 阴
    1.修改了 nick_name 路由的问题（拼写错误）
    2.group/list 路由返回值新增is_leader，用于区分用户是否是群主
    3.重新部署
    ps：sqlc不支持触发器，会报错

7/22 周二 多云转阴
    1.修改了application部分--> 删除好友后可再次申请；申请被拒绝后7天可再次发起申请（application表新增create_at为主键）
    2.修改了setting/friend/name的Bug（子查询返回多个值）；触发原因暂时不清楚，未能复现
    3.重新部署
    4.提交

7/23 周三 多云转晴
    1.推送

7/26 周六 晴
    1.经过种种调试，改Bug，看资料，问AI。终于，调试好了Socket.io部分
    2.URL=localhost:8080/chat?EIO=2&transport=websocket
    3.部署服务器

写到了
8.137.23.88

GetFriendSettingsByName     有Bug，子查询返回了多行数据->将 '=' 改为了 in
